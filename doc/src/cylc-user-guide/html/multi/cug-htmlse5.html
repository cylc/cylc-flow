<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Workflows For Cycling Systems</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html,fn-in,2,next --> 
<meta name="src" content="cug-html.tex"> 
<link rel="stylesheet" type="text/css" href="cug-html.css"> 
</head><body 
>
<!--l. 632--><div class="crosslinks"><p class="noindent">[<a 
href="cug-htmlse6.html" >next</a>] [<a 
href="cug-htmlse4.html" >prev</a>] [<a 
href="cug-htmlse4.html#tailcug-htmlse4.html" >prev-tail</a>] [<a 
href="#tailcug-htmlse5.html">tail</a>] [<a 
href="cug-html.html#cug-htmlse5.html" >up</a>] </p></div>
<!--l. 632--><p class="noindent" > <h3 id="5" class="sectionHead"><span class="titlemark"> <a href="#5">5</a>  <a 
 id="x7-210005"></a>Workflows For Cycling Systems </span></h3> <div class="sectionTOCS">
&#x00A0;<span class="subsectionToc" >5.1 <a 
href="#x7-220005.1">Cycling Workflows</a></span>
<br />&#x00A0;<span class="subsectionToc" >5.2 <a 
href="#x7-230005.2">Parameterized Tasks as a Proxy for Cycling</a></span>
<br />&#x00A0;<span class="subsectionToc" >5.3 <a 
href="#x7-240005.3">Mixed Cycling Workflows</a></span>
</div>
<!--l. 635--><p class="noindent" >A model run and associated processing may need to be cycled for the following reasons:
     <ul class="itemize1">
     <li class="itemize">In real time forecasting systems, a new forecast may be initiated at regular intervals when new real
     time data comes in.
     </li>
     <li class="itemize">It may be convenient (or necessary, e.g.&#x00A0;due to batch scheduler queue limits) to split single long model
     runs into many smaller chunks, each with associated pre- and post-processing workflows.</li></ul>
<!--l. 646--><p class="noindent" >Cylc provides two ways of constructing workflows for cycling systems: <span 
class="cmti-10">cycling workflows </span>and <span 
class="cmti-10">parameterized</span>
<span 
class="cmti-10">tasks</span>.
<!--l. 648--><p class="noindent" >
<!--l. 648--><p class="noindent" > <h4 id="5.1" class="subsectionHead"> <span class="titlemark"> <a href="#5.1"> 5.1</a>  <a 
 id="x7-220005.1"></a>Cycling Workflows </span></h4>
<!--l. 651--><p class="noindent" >This is cylc&#8217;s classic cycling mode as described in the Introduction. Each instance of a cycling job is represented by a
new instance of <span 
class="cmti-10">the same task</span>, with a new cycle point. The suite configuration defines patterns for extending the
workflow on the fly, so it can keep running indefinitely if necessary. For example, to cycle <span class="lstinline"></span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">.</span><span 
class="pcrr7t-">exe</span> on a monthly
sequence we could define a single task <span class="lstinline"></span><span 
class="pcrr7t-">model</span>, an initial cycle point, and a monthly sequence. Cylc then
generates the date-time sequence and creates a new task instance for each cycle point as it comes up.
Workflow dependencies are defined generically with respect to the &#8220;current cycle point&#8221; of the tasks
involved.
<!--l. 662--><p class="noindent" >This is the only sensible way to run very large suites or operational suites that need to continue cycling indefinitely.
The cycling is configured with standards-based ISO 8601 date-time <span 
class="cmti-10">recurrence expressions</span>. Multiple cycling
sequences can be used at once in the same suite. See Section&#x00A0;<a 
href="cug-htmlse9.html#x11-790009.3">9.3<!--tex4ht:ref: ConfiguringScheduling --></a>.
                                                                                         

                                                                                         
<!--l. 668--><p class="noindent" >
<!--l. 668--><p class="noindent" > <h4 id="5.2" class="subsectionHead"> <span class="titlemark"> <a href="#5.2"> 5.2</a>  <a 
 id="x7-230005.2"></a>Parameterized Tasks as a Proxy for Cycling </span></h4>
<!--l. 671--><p class="noindent" >It is also possible to run cycling jobs with a pre-defined static workflow in which each instance of a cycling job is
represented by <span 
class="cmti-10">a different task</span>: as far as the abstract workflow is concerned there is no cycling. The sequence of
tasks can be constructed efficiently, however, using cylc&#8217;s built-in suite parameters (<a 
href="cug-htmlse9.html#x11-1460009.6.7">9.6.7<!--tex4ht:ref: Parameterized Cycling --></a>) or explicit Jinja2 loops
(<a 
href="cug-htmlse9.html#x11-1480009.7">9.7<!--tex4ht:ref: Jinja2 --></a>).
<!--l. 678--><p class="noindent" >For example, to run <span class="lstinline"></span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">.</span><span 
class="pcrr7t-">exe</span> 12 times on a monthly cycle we could loop over an integer parameter
<span class="lstinline"></span><span 
class="pcrr7t-">R</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">0,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">1,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">2,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">...,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">11</span> to define tasks <span class="lstinline"></span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">-</span><span 
class="pcrr7t-">R0</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">-</span><span 
class="pcrr7t-">R1</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">-</span><span 
class="pcrr7t-">R2</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">...</span><span 
class="pcrr7t-">model</span><span 
class="pcrr7t-">-</span><span 
class="pcrr7t-">R11</span>, and the
parameter values could be multiplied by the interval <span class="lstinline"></span><span 
class="pcrr7t-">P1M</span> (one month) to get the start point for the corresponding
model run.
<!--l. 684--><p class="noindent" >This method is only good for smaller workflows of finite duration because every single task has to be mapped out in
advance, and cylc has to be aware of all of them throughout the entire run. Additionally Cylc&#8217;s <span 
class="cmti-10">cycling workflow</span>
capabilities (above) are more powerful, more flexible, and generally easier to use (Cylc will generate the
cycle point date-times for you, for instance), so that is the recommended way to drive most cycling
systems.
<!--l. 691--><p class="noindent" >The primary use for parameterized tasks in cylc is to generate ensembles and other groups of related tasks at the
same cycle point, not as a proxy for cycling.
<!--l. 695--><p class="noindent" >
<!--l. 695--><p class="noindent" > <h4 id="5.3" class="subsectionHead"> <span class="titlemark"> <a href="#5.3"> 5.3</a>  <a 
 id="x7-240005.3"></a>Mixed Cycling Workflows </span></h4>
<!--l. 697--><p class="noindent" >For completeness we note that parameterized cycling can be used within a cycling workflow. For example, in a daily
cycling workflow long (daily) model runs could be split into four shorter runs by parameterized cycling. A simpler
six-hourly cycling workflow should be considered first, however.
                                                                                         

                                                                                         
<!--l. 702--><div class="crosslinks"><p class="noindent">[<a 
href="cug-htmlse6.html" >next</a>] [<a 
href="cug-htmlse4.html" >prev</a>] [<a 
href="cug-htmlse4.html#tailcug-htmlse4.html" >prev-tail</a>] [<a 
href="cug-htmlse5.html" >front</a>] [<a 
href="cug-html.html#cug-htmlse5.html" >up</a>] </p></div>
<!--l. 702--><p class="noindent" ><a 
 id="tailcug-htmlse5.html"></a>  
</body></html> 
