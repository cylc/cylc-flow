\Preamble{html}
\begin{document}
    \Css{
    .lstlisting { color : crimson; }
    .lstinputlisting { color : crimson; }
    .lstinline { color : crimson; }
    body { width : 700px; border:1px solid grey; padding:50px; margin: 0 auto; margin-top:20px; margin-bottom:80px; background:white }
    html { background: LightSteelBlue } 
    }
\ConfigureToc{section}
{\tocNesting{1}\HCode{<li>}}{ }{}{\HCode{</li>}}
\ConfigureToc{subsection}
{\tocNesting{2}\HCode{<li>}}{ }{}{\HCode{</li>}}
\ConfigureToc{subsubsection}
{\tocNesting{3}\HCode{<li>}}{ }{}{\HCode{</li>}}
\Configure{tableofcontents}
{} {\tocNesting{0}} {} {} {}

\newcount\c
\def\tocNesting#1{%
    \expandafter\ifx \csname level#1\endcsname\relax
        \ifnum #1>0 \HCode{<ul>}\fi
        \expandafter\def \csname level#1\endcsname{\HCode{</ul>}}
    \fi
        \c=#1 \advance\c by 1
        \loop
        \csname level\the\c\endcsname
        \expandafter\let \csname level\the\c\endcsname\relax
        \advance\c by 1
        \ifnum \c<10   \repeat
}
\EndPreamble
