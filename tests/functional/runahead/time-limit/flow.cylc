# workflow that shuts down from inactivity once foo hits the runahead limit
[scheduler]
    UTC mode = True
    [[events]]
        abort on inactivity = True
        inactivity = PT10S
[scheduling]
    runahead limit = PT4H
    initial cycle point = 2020-01-01T00
    final cycle point = 2020-01-02T00
    [[graph]]
        PT1H = foo
[runtime]
    [[foo]]
        script = """
            if [[ "$CYLC_TASK_JOB" == '20200101T0000Z/foo/01' ]]; then
                # keep running until scheduler is gone
                while cylc ping $CYLC_WORKFLOW_NAME; do
                    sleep 10
                done
            else
                true
            fi
        """
