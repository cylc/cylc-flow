# Abort on stall timeout unless we remove unhandled failed and waiting task.
[scheduler]
    [[events]]
        stall timeout = PT20S
        abort on stall timeout = True
        expected task failures = b.1
[scheduling]
    [[graph]]
        R1 = """a => b => c
                cleaner"""
[runtime]
    [[a,c]]
        script = true
    [[b]]
        script = false
    [[cleaner]]
        script = """
cylc__job__poll_grep_workflow_log -E 'b\.1 running .* \(received\)failed'
# Remove the unhandled failed task.
cylc remove "$CYLC_WORKFLOW_ID" 'b.1'
# Remove waiting c.1
# (not auto-removed because parent b.1, an unhandled fail, is not finished.)
cylc remove "$CYLC_WORKFLOW_ID" '1/c:waiting'
"""
